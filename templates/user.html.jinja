{% extends "base/base.html.jinja" %}
{% import "base/test_cases.html.jinja" as test_cases %}
{% block content %}
  <div class="flex min-h-screen flex-col bg-byte-brown-950">
    <main class="flex-1">
      <div class="container mx-auto py-8 px-4 md:px-6">
        <div class="flex flex-col gap-6">
          <!-- Profile Header -->
          <div class="border border-byte-brown-500 bg-byte-brown-700 rounded-lg">
            <div class="p-6">
              <div class="flex flex-col md:flex-row gap-6 items-start">
                <div class="flex flex-col items-center gap-4">
                  <div class="h-24 w-24 border-4 border-green-500 rounded-full overflow-hidden bg-byte-brown-500 flex items-center justify-center">
                    <img src="{{ object.account_info.avatar }}&size=96"
                         alt="{{ object.account_info.username }}"
                         class="w-full h-full object-cover" />
                  </div>
                </div>
                <div class="flex-1 space-y-4">
                  <div>
                    <h1 class="text-3xl font-bold text-white">{{ object.account_info.username }}</h1>
                    <p class="text-byte-brown-200">Elite Code Golfer [Placholder] â€¢ Joined January 2023 [Not implemented]</p>
                  </div>
                  <div class="flex flex-wrap gap-2">
                    <span class="bg-amber-900 text-amber-100 border border-amber-700 text-xs px-2 py-1 rounded flex items-center gap-1">
                      <svg xmlns="http://www.w3.org/2000/svg"
                           width="12"
                           height="12"
                           fill="none"
                           viewBox="0 0 24 24"
                           stroke="currentColor"
                           stroke-width="2"
                           class="inline-block">
                        <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M6 20H4.5a2.5 2.5 0 0 1 0-5H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M6 9v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M6 20v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M12 9h1.5a2.5 2.5 0 0 1 0 5H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M12 20h1.5a2.5 2.5 0 0 1 0-5H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M12 9v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M12 20v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                      Rank #1 [Not implemented]
                    </span>
                    <span class="bg-green-900 text-green-100 border border-green-700 text-xs px-2 py-1 rounded flex items-center gap-1">
                      <svg xmlns="http://www.w3.org/2000/svg"
                           width="12"
                           height="12"
                           fill="none"
                           viewBox="0 0 24 24"
                           stroke="currentColor"
                           stroke-width="2"
                           class="inline-block">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" />
                        <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                      {{ object.solutions | length }} Heists Completed
                    </span>
                    <span class="bg-blue-900 text-blue-100 border border-blue-700 text-xs px-2 py-1 rounded flex items-center gap-1">
                      <svg xmlns="http://www.w3.org/2000/svg"
                           width="12"
                           height="12"
                           fill="none"
                           viewBox="0 0 24 24"
                           stroke="currentColor"
                           stroke-width="2"
                           class="inline-block">
                        <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                      15 First Places [Not implemented]
                    </span>
                  </div>
                  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center">
                      <div class="text-2xl font-bold text-green-400">
                        {% if object.solutions %}
                          {{ object.solutions | length }}
                        {% else %}
                          0
                        {% endif %}
                      </div>
                      <div class="text-sm text-byte-brown-200">Solutions</div>
                    </div>
                    <div class="text-center">
                      <div class="text-2xl font-bold text-amber-400">{{ object.solutions | length }}</div>
                      <div class="text-sm text-byte-brown-200">Challenges</div>
                    </div>
                    <div class="text-center">
                      <div class="text-2xl font-bold text-blue-400">15</div>
                      <div class="text-sm text-byte-brown-200">First Places</div>
                    </div>
                    <div class="text-center">
                      <div class="text-2xl font-bold text-purple-400">87%</div>
                      <div class="text-sm text-byte-brown-200">Success Rate [Placeholder]</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Overview Tab Content -->
          <div class="mt-6">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <!-- Performance Stats -->
              <div class="border border-byte-brown-500 bg-byte-brown-700 rounded-lg">
                <div class="p-6">
                  <h3 class="text-white flex items-center gap-2 text-lg font-semibold mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="20"
                         height="20"
                         fill="none"
                         viewBox="0 0 24 24"
                         stroke="currentColor"
                         stroke-width="2"
                         class="text-green-500">
                      <path d="M22 12h-4l-3 9L9 3l-3 9H2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    Performance Stats
                  </h3>
                  <div class="space-y-4">
                    <div class="space-y-2">
                      <div class="flex justify-between text-sm">
                        <span class="text-byte-brown-200">Average Solution Length [Not implemented]</span>
                        <span class="text-white">
                          {% if object.solutions and object.solutions | length > 0 %}
                            {{ object.solutions | length }} solutions
                          {% else %}
                            N/A
                          {% endif %}
                        </span>
                      </div>
                      <div class="w-full bg-byte-brown-500 rounded-full h-2">
                        <div class="bg-green-600 h-2 rounded-full" style="width: 75%"></div>
                      </div>
                    </div>
                    <div class="space-y-2">
                      <div class="flex justify-between text-sm">
                        <span class="text-byte-brown-200">Success Rate [Placeholder]</span>
                        <span class="text-white">87%</span>
                      </div>
                      <div class="w-full bg-byte-brown-500 rounded-full h-2">
                        <div class="bg-blue-600 h-2 rounded-full" style="width: 87%"></div>
                      </div>
                    </div>
                    <div class="space-y-2">
                      <div class="flex justify-between text-sm">
                        <span class="text-byte-brown-200">Speed (avg time to solve) [Placeholder]</span>
                        <span class="text-white">23 minutes</span>
                      </div>
                      <div class="w-full bg-byte-brown-500 rounded-full h-2">
                        <div class="bg-amber-600 h-2 rounded-full" style="width: 60%"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Recent Achievements -->
              <div class="border border-byte-brown-500 bg-byte-brown-700 rounded-lg">
                <div class="p-6">
                  <h3 class="text-white flex items-center gap-2 text-lg font-semibold mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="20"
                         height="20"
                         fill="none"
                         viewBox="0 0 24 24"
                         stroke="currentColor"
                         stroke-width="2"
                         class="text-amber-500">
                      <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M6 20H4.5a2.5 2.5 0 0 1 0-5H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M6 9v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M6 20v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M12 9h1.5a2.5 2.5 0 0 1 0 5H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M12 20h1.5a2.5 2.5 0 0 1 0-5H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M12 9v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M12 20v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    Recent Achievements
                  </h3>
                  <div class="space-y-4">
                    <div class="flex items-center gap-3 p-3 rounded-lg bg-byte-brown-500">
                      <div class="p-2 rounded-full bg-amber-900">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="16"
                             height="16"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke="currentColor"
                             stroke-width="2"
                             class="text-amber-400">
                          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" />
                          <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                      </div>
                      <div class="flex-1">
                        <div class="font-medium text-white">Speed Demon [Placeholder]</div>
                        <div class="text-sm text-byte-brown-200">Solved 5 challenges in under 10 minutes each</div>
                      </div>
                      <div class="text-xs text-byte-brown-200">2 days ago</div>
                    </div>
                    <div class="flex items-center gap-3 p-3 rounded-lg bg-byte-brown-500">
                      <div class="p-2 rounded-full bg-green-900">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="16"
                             height="16"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke="currentColor"
                             stroke-width="2"
                             class="text-green-400">
                          <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                          <path d="M6 20H4.5a2.5 2.5 0 0 1 0-5H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                          <path d="M6 9v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                          <path d="M6 20v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                          <path d="M12 9h1.5a2.5 2.5 0 0 1 0 5H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                          <path d="M12 20h1.5a2.5 2.5 0 0 1 0-5H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                          <path d="M12 9v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                          <path d="M12 20v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                      </div>
                      <div class="flex-1">
                        <div class="font-medium text-white">Code Golf Master</div>
                        <div class="text-sm text-byte-brown-200">Achieved the shortest solution in 3 different challenges</div>
                      </div>
                      <div class="text-xs text-byte-brown-200">1 week ago</div>
                    </div>
                    <div class="flex items-center gap-3 p-3 rounded-lg bg-byte-brown-500">
                      <div class="p-2 rounded-full bg-blue-900">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="16"
                             height="16"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke="currentColor"
                             stroke-width="2"
                             class="text-blue-400">
                          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" />
                          <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                      </div>
                      <div class="flex-1">
                        <div class="font-medium text-white">Streak Keeper [Placeholder]</div>
                        <div class="text-sm text-byte-brown-200">Maintained a 7-day solving streak</div>
                      </div>
                      <div class="text-xs text-byte-brown-200">2 weeks ago</div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Recent Submissions -->
              <div class="border border-byte-brown-500 bg-byte-brown-700 rounded-lg lg:col-span-2">
                <div class="p-6">
                  <h3 class="text-white flex items-center gap-2 text-lg font-semibold mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="20"
                         height="20"
                         fill="none"
                         viewBox="0 0 24 24"
                         stroke="currentColor"
                         stroke-width="2"
                         class="text-green-500">
                      <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M21 12c-1 0-2-1-2-2s1-2 2-2 2 1 2 2-1 2-2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M3 12c1 0 2-1 2-2s-1-2-2-2-2 1-2 2 1 2 2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M12 3c0 1-1 2-2 2s-2-1-2-2 1-2 2-2 2 1 2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M12 21c0-1 1-2 2-2s2 1 2 2-1 2-2 2-2-1-2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    Recent Submissions
                  </h3>
                  <div class="space-y-4">
                    {% set langs = languages() %}
                    {% for solution in object.solutions %}
                      {% if loop.index <= 5 %}
                        <div class="flex items-center justify-between p-4 rounded-lg bg-byte-brown-500 hover:bg-byte-brown-700 transition-colors">
                          <div class="flex items-center gap-4">
                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                            <div>
                              <div class="font-medium text-white">
                                <a href="/challenge/{{ solution.challenge_id }}/{{ solution.challenge_name | slugify }}/solve/{{ solution.language }}"
                                   class="hover:text-green-400 transition-colors">{{ solution.challenge_name }}</a>
                              </div>
                              <div class="text-sm text-byte-brown-200">
                                <img src="{%- if langs[solution.language] -%}/static/lang-icons/{{ langs[solution.language].icon }}{%- endif -%}"
                                     width="16"
                                     height="16"
                                     alt=""
                                     class="inline-block mr-1" />
                                {{ langs[solution.language].displayName }} â€¢ {{ solution.score }} characters
                              </div>
                            </div>
                          </div>
                          <div class="text-right">
                            <div class="text-sm font-medium text-green-400">Accepted</div>
                            <div class="text-xs text-byte-brown-200">2 hours ago</div>
                          </div>
                        </div>
                      {% endif %}
                    {% endfor %}
                    {% if not object.solutions %}
                      <div class="text-center py-8">
                        <div class="text-byte-brown-200">No submissions yet.</div>
                      </div>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Solutions Table (Original functionality) -->
          {% if object.solutions %}
            <div class="mt-8">
              <div class="border border-byte-brown-500 bg-byte-brown-700 rounded-lg">
                <div class="p-6">
                  <h3 class="text-white text-lg font-semibold mb-4">All Solutions</h3>
                  <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                      <thead>
                        <tr class="border-b border-byte-brown-500">
                          <th class="text-left py-3 px-4 text-byte-brown-200 font-medium">Challenge</th>
                          <th class="text-left py-3 px-4 text-byte-brown-200 font-medium">Language</th>
                          <th class="text-left py-3 px-4 text-byte-brown-200 font-medium">Score</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for solution in object.solutions %}
                          <tr class="border-b border-byte-brown-500 hover:bg-byte-brown-500 transition-colors">
                            <td class="py-3 px-4">
                              <a href="/challenge/{{ solution.challenge_id }}/{{ solution.challenge_name | slugify }}/solve/{{ solution.language }}"
                                 class="text-white hover:text-green-400 transition-colors">
                                {{ solution.challenge_name }}
                              </a>
                            </td>
                            <td class="py-3 px-4">
                              <a href="/challenge/{{ solution.challenge_id }}/{{ solution.challenge_name | slugify }}/solve/{{ solution.language }}"
                                 class="flex items-center gap-2 text-white hover:text-green-400 transition-colors">
                                <img src="{%- if langs[solution.language] -%}/static/lang-icons/{{ langs[solution.language].icon }}{%- endif -%}"
                                     width="24"
                                     height="24"
                                     alt=""
                                     class="lang-icon" />
                                {% if langs[solution.language] %}{{ langs[solution.language].displayName }}{% endif %}
                              </a>
                            </td>
                            <td class="py-3 px-4 text-white">{{ solution.score }}</td>
                          </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}
          <!-- Invalid Solutions (if user is viewing their own profile) -->
          {% if account and account.id == object.id and object.invalidated_solutions %}
            <div class="mt-8">
              <div class="border border-byte-brown-500 bg-byte-brown-700 rounded-lg">
                <div class="p-6">
                  <h3 class="text-white text-lg font-semibold mb-4">Invalid Solutions</h3>
                  <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                      <thead>
                        <tr class="border-b border-byte-brown-500">
                          <th class="text-left py-3 px-4 text-byte-brown-200 font-medium">Challenge</th>
                          <th class="text-left py-3 px-4 text-byte-brown-200 font-medium">Language</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for solution in object.invalidated_solutions %}
                          <tr class="border-b border-byte-brown-500 hover:bg-byte-brown-500 transition-colors">
                            <td class="py-3 px-4">
                              <a href="/challenge/{{ solution.challenge_id }}/{{ solution.challenge_name | slugify }}/solve/{{ solution.language }}"
                                 class="text-white hover:text-green-400 transition-colors">
                                {{ solution.challenge_name }}
                              </a>
                            </td>
                            <td class="py-3 px-4">
                              <a href="/challenge/{{ solution.challenge_id }}/{{ solution.challenge_name | slugify }}/solve/{{ solution.language }}"
                                 class="flex items-center gap-2 text-white hover:text-green-400 transition-colors">
                                <img src="/static/lang-icons/{{ langs[solution.language].icon }}"
                                     width="24"
                                     height="24"
                                     alt=""
                                     class="lang-icon" />
                                {{ langs[solution.language].displayName }}
                              </a>
                            </td>
                          </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </main>
{% endblock content %}
